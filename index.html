<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Adit Menabung</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;font-family:"Segoe UI",Arial;background:#f2f4f8}
.header{background:linear-gradient(135deg,#3f8efc,#6fa8ff);color:#fff;padding:32px 20px 50px;border-radius:0 0 28px 28px}
.header h1{margin:0}
.content{padding:20px;padding-bottom:100px}
.card{background:#fff;border-radius:20px;padding:16px;margin-bottom:16px;box-shadow:0 8px 16px rgba(0,0,0,.08)}
.summary{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.summary div{padding:14px;border-radius:16px;color:#fff}
.income{background:#f39c12}.expense{background:#e74c3c}.saldo{background:#1abc9c}.target{background:#3498db}
input,button{width:100%;padding:12px;margin-top:8px;border-radius:14px;border:1px solid #ddd}
button{background:#3f8efc;color:#fff;border:none}
.bottom-nav{position:fixed;bottom:0;left:0;right:0;height:70px;background:#fff;display:flex;justify-content:space-around;align-items:center;box-shadow:0 -5px 15px rgba(0,0,0,.1)}
.bottom-nav button{background:none;border:none;font-size:22px}
</style>
</head>

<body>

<div class="header">
  <h1>Adit Menabung ğŸ’°</h1>
  <p>Seng konsisten cok // Ambabung</p>
</div>

<div class="content">

<!-- DASHBOARD -->
<div id="dashboard" class="page">
  <div class="summary">
    <div class="income">ğŸ’° Pemasukan<br>Rp <span id="sumIn">0</span></div>
    <div class="expense">ğŸ’¸ Pengeluaran<br>Rp <span id="sumOut">0</span></div>
    <div class="saldo">ğŸ’³ Saldo<br>Rp <span id="saldoText">0</span></div>
    <div class="target">ğŸ¯ Target<br>Rp <span id="targetVal">0</span></div>
  </div>

  <div class="card">
    <h3>ğŸ¯ Progress Target Menabung</h3>
    <div style="background:#eee;border-radius:12px;height:16px">
      <div id="progressBar" style="height:16px;width:0%;background:#3498db"></div>
    </div>
    <p><span id="progressText">0%</span> tercapai</p>
  </div>

  <div class="card">
    <h3>ğŸ“Š Ringkasan Keuangan</h3>
    <canvas id="barChart"></canvas>
  </div>

  <div class="card">
    <h3>ğŸ¥§ Tren Keuangan</h3>
    <canvas id="trendChart"></canvas>
  </div>
</div>

<!-- INPUT -->
<div id="input" class="page" style="display:none">
  <div class="card">
    <h3>â• Input Pemasukan</h3>
    <input type="number" id="inAmount" placeholder="Jumlah pemasukan">
    <button onclick="addIncome()">Simpan</button>
  </div>

  <div class="card">
    <h3>â– Input Pengeluaran</h3>
    <input type="number" id="outAmount" placeholder="Jumlah pengeluaran">
    <button onclick="addExpense()">Simpan</button>
  </div>
</div>

<!-- TARGET -->
<div id="target" class="page" style="display:none">
  <div class="card">
    <h3>ğŸ¯ Target Menabung</h3>
    <input type="number" id="targetInput" placeholder="Target tabungan">
    <button onclick="setTarget()">Simpan Target</button>
  </div>
</div>

<!-- LAPORAN -->
<div id="report" class="page" style="display:none">
  <div class="card">
    <h3>ğŸ“„ Laporan Keuangan</h3>

    <p>Total Pemasukan: Rp <b><span id="rIn">0</span></b></p>
    <p>Total Pengeluaran: Rp <b><span id="rOut">0</span></b></p>
    <p>Saldo Akhir: Rp <b><span id="rSaldo">0</span></b></p>

    <hr style="margin:16px 0">

    <p>ğŸ¯ Target tercapai dalam <b><span id="targetDays">-</span></b> hari</p>
    <p>ğŸ“… Perkiraan tanggal tercapai: <b><span id="targetDate">-</span></b></p>

    <p style="font-size:13px;opacity:.7">(Asumsi nabung Rp20.000 / hari)</p>

    <button onclick="resetMenu()" style="background:#e74c3c">ğŸ”„ Reset Data</button>
  </div>
</div>

</div>

<div class="bottom-nav">
  <button onclick="showPage('dashboard')">ğŸ </button>
  <button onclick="showPage('input')">â•</button>
  <button onclick="showPage('target')">ğŸ¯</button>
  <button onclick="showPage('report')">ğŸ“„</button>
</div>

<script>
let transactions = JSON.parse(localStorage.getItem("transactions") || "[]");
let target = Number(localStorage.getItem("target") || 0);

function today(){
  return new Date().toISOString().slice(0,10);
}

function save(){
  localStorage.setItem("transactions", JSON.stringify(transactions));
  localStorage.setItem("target", target);
}

function calc(){
  let income = 0, expense = 0;
  transactions.forEach(t => {
    if(t.type === "in") income += t.amount;
    else expense += t.amount;
  });
  return { income, expense, saldo: income - expense };
}

/* CHART */
const barChart = new Chart(barChartCtx = document.getElementById("barChart"),{
  type:"bar",
  data:{labels:["Pemasukan","Pengeluaran","Saldo"],
    datasets:[{data:[0,0,0],backgroundColor:["#f39c12","#e74c3c","#1abc9c"]}]},
  options:{plugins:{legend:{display:false}}}
});

const trendChart = new Chart(document.getElementById("trendChart"),{
  type:"doughnut",
  data:{labels:["Pemasukan","Pengeluaran","Saldo"],
    datasets:[{data:[0,0,0],backgroundColor:["#f39c12","#e74c3c","#1abc9c"]}]}
});

/* UI UPDATE */
function updateUI(){
  const {income, expense, saldo} = calc();

  sumIn.textContent = income;
  sumOut.textContent = expense;
  saldoText.textContent = saldo;
  targetVal.textContent = target;

  rIn.textContent = income;
  rOut.textContent = expense;
  rSaldo.textContent = saldo;

  barChart.data.datasets[0].data = [income, expense, saldo];
  trendChart.data.datasets[0].data = [income, expense, Math.max(saldo,0)];
  barChart.update(); trendChart.update();

  if(target > 0){
    const percent = Math.min((saldo / target) * 100, 100);
    progressBar.style.width = percent + "%";
    progressText.textContent = percent.toFixed(1) + "%";

    const remaining = target - saldo;
    const dailySave = 20000;

    if(remaining <= 0){
      targetDays.textContent = "0";
      targetDate.textContent = "Hari ini ğŸ‰";
    }else{
      const days = Math.ceil(remaining / dailySave);
      targetDays.textContent = days;
      const d = new Date(); d.setDate(d.getDate() + days);
      targetDate.textContent = d.toLocaleDateString("id-ID");
    }
  }else{
    progressBar.style.width = "0%";
    progressText.textContent = "0%";
    targetDays.textContent = "-";
    targetDate.textContent = "-";
  }
}

/* ACTIONS */
function addIncome(){
  if(inAmount.value > 0){
    transactions.push({type:"in",amount:+inAmount.value,date:today()});
    inAmount.value="";
    save(); updateUI();
  }
}

function addExpense(){
  if(outAmount.value > 0){
    transactions.push({type:"out",amount:+outAmount.value,date:today()});
    outAmount.value="";
    save(); updateUI();
  }
}

function setTarget(){
  target = +targetInput.value || 0;
  save(); updateUI();
}

function resetMenu(){
  const p = prompt(
    "RESET DATA\n" +
    "1 = Hapus Tanggal Tertentu\n" +
    "2 = Hapus Bulan Tertentu\n" +
    "3 = Hapus Semua Data"
  );

  if(p === "1"){
    const d = prompt("Masukkan tanggal (YYYY-MM-DD):");
    if(d){
      transactions = transactions.filter(t => t.date !== d);
    }
  }

  else if(p === "2"){
    const m = prompt("Masukkan bulan (1-12):");
    if(m){
      const mm = m.padStart(2,"0");
      transactions = transactions.filter(t => t.date.slice(5,7) !== mm);
    }
  }

  else if(p === "3"){
    if(confirm("Yakin hapus SEMUA data?")){
      transactions = [];
      target = 0;
    }
  }

  save();
  updateUI();
}


function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.style.display="none");
  document.getElementById(id).style.display="block";
}

showPage("dashboard");
updateUI();
</script>

</body>
</html>


